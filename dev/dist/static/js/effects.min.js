"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports,require("scenejs")):"function"==typeof define&&define.amd?define(["exports","scenejs"],t):t((e=e||self).Scene=e.Scene||{},e.Scene)}(void 0,(function(e,t){function r(e){return Array.isArray(e)}function n(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],n=t[2];return{prefix:r,unit:t[3],value:parseFloat(n)}}function o(e){return[].slice.call(e)}var i=CSSRule.KEYFRAMES_RULE||CSSRule.WEBKIT_KEYFRAMES_RULE,a=CSSRule.KEYFRAME_RULE||CSSRule.WEBKIT_KEYFRAME_RULE;function f(e,r,n){for(var o=new t.SceneItem({},n),i=r.length,a=0;a<i;++a)o.set(a/(i-1)*100+"%",e,r[a]);return o}function c(e){var r,n=void 0===e?{}:e,o=n.x,i=void 0===o?1:o,a=n.y,f=void 0===a?1:a,c=n.backside,u=void 0!==c&&c,s=new t.SceneItem({},arguments[0]),v="",d="",p="",l=i&&f||i?i:f,y=u?l>0?180:-180:0,m=y+180*l;if(i&&f){var x=[i>0?1:-1,f>0?1:-1,0,""].join(",");v="rotate3d",d=x+y+"deg",p=x+m+"deg"}else{if(i)v="rotateX";else{if(!f)return s;v="rotateY"}d=y+"deg",p=m+"deg"}return s.set({transform:(r={},r[v]=[d,p],r)}),s}function u(e){var o=void 0===e?{}:e,i=o.properties,a=void 0===i?{transform:{translateX:["-10px","10px"],translateY:["-10px","10px"],rotate:["-10deg","10deg"]}}:i,f=o.frequency,c=void 0===f?10:f,u=new t.SceneItem({},arguments[0]),s=new t.Frame(a),v=s.getNames();return v.forEach((function(e,t){var o=s.get.apply(s,e),i=0,a=0,f="";if(r(o)){var v=n(o[0]),d=v.value;f=v.unit,i=d,a=n(o[1]).value}else{var p=n(o),l=p.value;f=p.unit,i=-(a=Math.abs(l))}u.set.apply(u,["0%"].concat(e,[""+(i+a)/2+f])),u.set.apply(u,["100%"].concat(e,[""+(i+a)/2+f]));for(var y=1;y<=c;++y){var m=Math.random()*(a-i)+i;u.set.apply(u,[y/(c+1)*100+"%"].concat(e,[""+m+f]))}})),u}e.blink=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?0:r,o=t.to,i=void 0===o?1:o;return f("opacity",[n,i,n],arguments[0])},e.fadeIn=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?0:r,o=t.to,i=void 0===o?1:o;return f("opacity",[n,i],arguments[0])},e.fadeOut=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?1:r,o=t.to,i=void 0===o?0:o;return f("opacity",[n,i],arguments[0])},e.flip=c,e.flipX=function(e){var t=void 0===e?{}:e,r=t.x,n=void 0===r?1:r,o=t.backside,i=void 0!==o&&o,a=c({y:0,x:n,backside:i});return a.setOptions(arguments[0]),a},e.flipY=function(e){var t=void 0===e?{}:e,r=t.y,n=void 0===r?1:r,o=t.backside,i=void 0!==o&&o,a=c({x:0,y:n,backside:i});return a.setOptions(arguments[0]),a},e.keyframer=function(e,r){return new t.SceneItem(function(e){for(var t=o(document.styleSheets).filter((function(e){try{return e.cssRules.length>0}catch(e){return!1}})),r=t.length,n=function(r){var n=o(t[r].cssRules).filter((function(t){return t.name===e&&t.type===i}))[0];if(n){var f=o(n.cssRules),c={};return f.forEach((function(e){if(e.type===a){var t=e.keyText,r=e.style.cssText;(n=t,o=n.match(/("[^"]*"|'[^']*'|[^,\s()]*\((?:[^()]*|\([^()]*\))*\)[^,\s()]*|[^,])+/g),o?o.map((function(e){return e.trim()})):[]).forEach((function(e){c[e]=r}))}var n,o})),{value:c}}},f=0;f<r;++f){var c=n(f);if("object"===_typeof(c))return c.value}return{}}(e),r)},e.kineticFrame=function(e){var r=void 0===e?{}:e,n=r.leftProperty,o=void 0===n?["transform","translateX"]:n,i=r.topProperty,a=void 0===i?["transform","translateY"]:i,f=r.left,c=void 0===f?"0px":f,u=r.top,s=void 0===u?"0px":u,v=new t.Frame;return v.set.apply(v,[].concat(o).concat([c])),v.set.apply(v,[].concat(a).concat([s])),v.set("transform-origin","calc(50% - "+c+") calc(50% - "+s+")"),v},e.shake=u,e.shakeX=function(e){var t=void 0===e?{}:e,r=t.x,n=void 0===r?["-5px","5px"]:r,o=t.frequency,i=void 0===o?10:o,a=u({properties:{transform:{translateX:n}},frequency:i});return a.setOptions(arguments[0]),a},e.shakeY=function(e){var t=void 0===e?{}:e,r=t.y,n=void 0===r?["-5px","5px"]:r,o=t.frequency,i=void 0===o?10:o,a=u({properties:{transform:{translateY:n}},frequency:i});return a.setOptions(arguments[0]),a},e.transition=function(e,r,n){var o,i=new t.SceneItem;i.append(n);var a=i.getDuration(),f=Math.max(e.getDuration()-a,0);e.set(((o={})[f]=i,o)),i.setDirection("reverse"),r.set({0:i})},e.typing=function(e){var r=void 0===e?{}:e,n=r.property,o=void 0===n?["html"]:n,i=r.text,a=void 0===i?"":i,f=r.start,c=void 0===f?0:f,u=r.end,s=void 0===u?a.length:u,v=r.prefix,d=void 0===v?"":v,p=r.suffix,l=void 0===p?"":p,y=[].concat(o),m=new t.SceneItem,x=Math.abs(s-c)+1;if(c<s)for(var S=c;S<=s;++S)m.set.apply(m,[(S-c)/x*100+"%"].concat(y,[""+d+a.substring(c,S)+l]));else for(S=s;S<=c;++S)m.set.apply(m,[(S-s)/x*100+"%"].concat(y,[d+"text.substring(end, start + end - i)"+l]));return m.setOptions(arguments[0]),m},e.wipeIn=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?"-100%":r,o=t.to,i=void 0===o?"0%":o,a=t.property,c=void 0===a?"left":a;return f(c,[n,i],arguments[0])},e.wipeOut=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?"0%":r,o=t.to,i=void 0===o?"100%":o,a=t.property,c=void 0===a?"left":a;return f(c,[n,i],arguments[0])},e.zoomIn=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?0:r,o=t.to,i=void 0===o?1:o;return f(["transform","scale"],[n,i],arguments[0])},e.zoomOut=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?1:r,o=t.to,i=void 0===o?0:o;return f(["transform","scale"],[n,i],arguments[0])}}));